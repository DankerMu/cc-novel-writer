# 核心 8 维度质量评分标准

本文档定义 QualityJudge 的完整评分标准。每维度 1-5 分，综合分 = 加权均值。

> **注意（动态权重）**：评分维度权重以 `manifest.inline.scoring_weights` 为准（来源：`platform-profile.json.scoring` + `genre-weight-profiles.json`）。本文各维度标题中的“权重 X”与下方固定公式仅作为 **legacy fallback 默认值**（当未提供 `scoring_weights` 时使用）。

## 1. 情节逻辑（plot_logic）— 权重 0.18

评估章节与大纲的一致性、内部逻辑、因果链完整性。

| 分数 | 标准 |
|------|------|
| 5 | 完美推进大纲目标，因果链清晰无断裂，无逻辑漏洞 |
| 4 | 推进大纲主要目标，因果链基本完整，可能有 1 处小瑕疵 |
| 3 | 大纲目标部分达成，有 1-2 处逻辑不够顺畅 |
| 2 | 偏离大纲方向，有明显逻辑断裂或矛盾 |
| 1 | 严重偏离大纲，情节混乱无逻辑 |

## 2. 角色塑造（character）— 权重 0.18

评估角色言行是否符合档案设定、性格连续性、L2 契约合规。

| 分数 | 标准 |
|------|------|
| 5 | 角色言行完全符合人设，语癖自然，性格连贯，契约无违反 |
| 4 | 角色基本符合人设，语癖偶有缺失，1 处细微不一致 |
| 3 | 角色大体符合，但有 1-2 处明显不符合性格设定 |
| 2 | 角色表现与人设多处矛盾，或违反 L2 契约 |
| 1 | 角色面目模糊、自相矛盾，或严重违反契约 |

## 3. 伏笔处理（foreshadowing）— 权重 0.10

评估伏笔的埋设自然度、推进合理性、回收满足感。

| 分数 | 标准 |
|------|------|
| 5 | 伏笔埋设隐蔽自然，推进不突兀，回收有"啊哈"感 |
| 4 | 伏笔处理得当，但自然度或满足感稍弱 |
| 3 | 伏笔存在但不够自然（过于明显或过于隐晦） |
| 2 | 遗漏应处理的伏笔，或伏笔处理生硬 |
| 1 | 完全忽视伏笔任务，或伏笔处理导致情节矛盾 |

## 4. 沉浸感（immersion）— 权重 0.15

评估画面感、氛围营造、详略得当。

| 分数 | 标准 |
|------|------|
| 5 | 文笔流畅优美，用词精准传神，修辞恰到好处 |
| 4 | 文笔流畅，用词准确，偶有平淡之处 |
| 3 | 文笔通顺，但有重复用词或表达不够精准 |
| 2 | 文笔平庸，用词单一，有明显语病 |
| 1 | 语句不通，病句频出，严重影响阅读 |

## 5. 节奏（pacing）— 权重 0.08

评估冲突强度、情节张弛、阅读节奏。

| 分数 | 标准 |
|------|------|
| 5 | 节奏精准，张弛有度，推进与留白恰到好处 |
| 4 | 节奏流畅，冲突有吸引力，偶有拖沓 |
| 3 | 节奏尚可，但部分段落拖沓或过于急促 |
| 2 | 节奏失衡，明显拖沓或跳跃 |
| 1 | 节奏混乱，无法正常推进 |

## 6. 风格自然度（style_naturalness）— 权重 0.15

评估去 AI 化效果，基于可量化指标。

| 分数 | AI 黑名单命中率 | 句式重复率（相邻 5 句） | style-profile 匹配度 |
|------|----------------|----------------------|---------------------|
| 5 | 0 次/千字 | 0 个重复句式 | 句长、对话比、修辞完全匹配 |
| 4 | 1-2 次/千字 | ≤ 1 个重复句式 | 大部分匹配，轻微偏差 |
| 3 | 3-4 次/千字 | 2 个重复句式 | 部分匹配，有偏移 |
| 2 | 5-7 次/千字 | ≥ 3 个重复句式 | 明显不匹配 |
| 1 | > 7 次/千字 | 频繁重复 | 完全不匹配 |

## 7. 情感冲击（emotional_impact）— 权重 0.08

评估情感起伏、读者代入感、情绪共鸣。

| 分数 | 标准 |
|------|------|
| 5 | 情感冲击强烈，读者强代入感，情绪共鸣持久 |
| 4 | 情感有起伏，读者能投入，共鸣感良好 |
| 3 | 情感起伏不明显，代入感一般 |
| 2 | 情感平板，难以产生代入感 |
| 1 | 情感缺失，读者无法投入 |

## 8. 故事线连贯（storyline_coherence）— 权重 0.08

评估多线叙事的切线流畅度、读者跟线难度、并发线暗示自然度。

| 分数 | 标准 |
|------|------|
| 5 | 切线无缝，读者无跟线困难，并发线暗示自然巧妙 |
| 4 | 切线流畅，偶有跟线小困惑，暗示基本自然 |
| 3 | 切线可辨识但略显突兀，或暗示过于明显/缺失 |
| 2 | 切线生硬，读者可能迷失，暗示不当 |
| 1 | 切线混乱，线索混淆，严重影响阅读 |

**注意**：单线章节（非切线章）此维度默认 4 分，仅评估与上下文的衔接自然度。

## 9. 章末钩子强度（hook_strength）— 条件启用

当 `platform-profile.json.hook_policy.required=true` 时启用该维度：
- **评分**：1-5 分（钩子越强分越高）
- **证据**：必须来自章节末尾（最后 1–2 段的短片段）；建议同时写入 `hook.evidence` 与 `scores.hook_strength.evidence`（内容可相同）便于门控与审计
- **权重**：以 `manifest.inline.scoring_weights.weights.hook_strength` 为准；若未提供 `scoring_weights`，默认权重为 `0.0`（不计入 overall）。当 `hook_policy.required=false` 时，执行器会强制将 `hook_strength` 权重归零（即使权重档案里有非零默认值）。

## 综合分计算

```
overall = plot_logic × 0.18
        + character × 0.18
        + immersion × 0.15
        + foreshadowing × 0.10
        + pacing × 0.08
        + style_naturalness × 0.15
        + emotional_impact × 0.08
        + storyline_coherence × 0.08
```

若提供了 `scoring_weights`，则：

```
overall = Σ(scores[dim].score × scoring_weights.weights[dim]) / Σ(scoring_weights.weights[dim])  （加权均值）
```

## 门控决策

| 综合分范围 | 合规状态 | 行动 |
|-----------|---------|------|
| 任意 | 有 high-confidence violation | 强制修订（无论分数多高；仅 confidence="high" 触发，medium/low 记录警告不阻断） |
| 4.0-5.0 | 无 violation | 直接通过 |
| 3.5-3.9 | 无 violation | StyleRefiner 二次润色后通过 |
| 3.0-3.4 | 无 violation | ChapterWriter（Opus）自动修订 |
| 2.0-2.9 | 无 violation | 通知用户，人工审核决定重写范围 |
| < 2.0 | 无 violation | 强制全章重写 |
